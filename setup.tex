% import packages
\usepackage{fullpage}
\usepackage{hanging}
\usepackage[unicode,pdfpagelabels=false]{hyperref}
\usepackage[sorting=ydnt,bibstyle=authoryear-comp,labelyear=false,defernumbers=true,maxnames=20,firstinits=true, uniquename=init,dashed=false]{biblatex}

% setup hrefs
\definecolor{linkcolour}{rgb}{0,0.2,0.6}
\hypersetup{colorlinks,breaklinks,urlcolor=linkcolour, linkcolor=linkcolour}

% import CV style
\moderncvtheme[grey]{classic}

\firstname{Duncan M.}
\familyname{Macleod}

% setup arXiv link
\newcommand\arXiv[1]{\link[arXiv:#1]{http://arXiv.org/abs/#1}}

% define cvpub command
\newcommand*{\cvpublication}[7][.25em]{%
    \vspace{0.5em}
    \cvitem[#1]{#2}{%
        \begin{hangparas}{2em}{1}
            #3\quad#4.\quad#5, #6%
        \end{hangparas}
        \begin{minipage}[t]{\linewidth}\small#7
        \end{minipage}
    }%
}

% declare bibliography style
\DeclareFieldFormat[article]{title}{#1\isdot}
\DeclareFieldFormat[article]{eprint}{\arXiv{#1}}
\DeclareBibliographyDriver{article}{%
    \cvpublication{}
           {\printnames{labelname}}
           {\printfield{title}}
           {\printfield{journaltitle}, \printfield{volume}}
           {\printfield{year}}
           {\printfield{eprint}}
}

% setup publications
\bibliography{../references/references}
\nocite{*}

